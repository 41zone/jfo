/**
 * JFO Remote Frameworkï¼ŒSome question for email 'jimmy.song@aliyun.com'
 * Declare: This framework of Javascript developed by 41zone team
 * License: MIT
 */
(function(c){var e=function(){this.settings={begin:function(){},success:function(){},error:function(){},scripts:[],styles:[],custom:{},ready:false};this.ajax={url:"",method:"GET",type:"text",cache:false,async:true,params:{},success:function(f,g){},error:function(f,g){}};this.httpRequest=false;this.scripts={len:0,list:[],loaded:0,done:false};this.styles={len:0,list:[],loaded:0};this.oid="JFO_REMOTE_"+Math.floor(Math.random()*100000)+"_"+new Date().getTime();this.div=null;this.params={};this.query={};this.src=""};var b=typeof document.all!=="undefined";e.prototype={init:function(){this.div=document.getElementById(this.oid);if(typeof this.div==="undefined"||this.div===null){this.div=document.createElement("div");this.div.id=this.oid;document.body.appendChild(this.div)}this.div=document.getElementById(this.oid);this._readParams()},_lock:function(){var f=document.getElementsByTagName("script");script=f[f.length-1];this.src=script.src},_readParams:function(){this.params=this.doQuery(this.src);this.query=this.doQuery(window.location.search)},doQuery:function(i){if(!i){return{}}var g=/(?:\?|&)(.*?)=(.*?)(?=&|$)/g;var f,h={};while((f=g.exec(i))!=null){h[f[1]]=decodeURIComponent(f[2])}return h},overwrite:function(g,h){if(typeof g!=="object"||typeof h!=="object"){return g}for(var f in h){if(typeof g[f]!=="undefined"&&typeof h[f]===typeof g[f]){if(typeof g[f]==="object"&&!(g[f] instanceof Array)){this.overwrite(g[f],h[f])}else{g[f]=h[f]}}else{g[f]=h[f]}}return g},oneStep:function(f){var g=this;this.init();this.overwrite(this.settings,f);this.settings.begin(this);this.loadStyle(function(){g.loadScript(function(){g.settings.success(g)},g.settings.scripts)},this.settings.styles)},existScript:function(f){var h=this.scripts.list;for(var g=0;g<h.length;g++){if(h[g]==f){return true}}return false},existStyle:function(g){var h=this.styles.list;for(var f=0;f<h.length;f++){if(h[f]==g){return true}}return false},installLoadEvent:function(g,f,h){var i=this;if(b){g.attachEvent("onreadystatechange",function(){if(g.readyState=="loaded"||g.readyState=="complete"){f.loaded++;if(f.loaded>=f.len&&!f.done){h(i)}g.detachEvent("onreadystatechange",arguments.callee)}})}else{g.addEventListener("load",function(){f.loaded++;if(f.loaded>=f.len&&!f.done){f.done=true;h(i)}g.removeEventListener("load",arguments.call,false)},false)}},loadScript:function(m,g){if(g.length<=0){this.scripts.done=true;m(this);return}this.scripts.len=g.length;for(var h=0;h<g.length;h++){if(this.existScript(g[h])){continue}var j=g[h];var f=document.createElement("script");f.type="text/javascript";if(typeof j==="string"){f.src=encodeURI(j)}else{if(typeof j==="object"&&typeof j.url!=="undefined"){if(typeof j.conflict!=="undefined"||j.conflict!==null){var k=j.force;if(typeof window[j.conflict]!=="undefined"){this.scripts.len--;if(!k){try{console.log('The page exist object conflict script about "'+j.conflict+'"')}catch(l){}continue}}}f.src=encodeURI(j.url)}else{f=null;this.scripts.len--;continue}}this.div.appendChild(f);this.scripts.list.push(f);this.installLoadEvent(f,this.scripts,m)}if(this.scripts.len<=0){this.scripts.done=true;m(this);return}},loadStyle:function(j,f){if(f.length<=0){j(this);return}this.styles.len=f.length;for(var g=0;g<f.length;g++){if(this.existStyle(f[g])){continue}var h=document.createElement("link");h.type="text/css";h.rel="stylesheet";h.href=f[g];this.div.appendChild(h);this.styles.list.push(h);this.installLoadEvent(h,this.styles,j)}}};var d=new e();d._lock();if(c.ready){var a=(function(g,f){return function(){g.oneStep(f)}})(d,c);if(window.attachEvent){window.attachEvent("onload",a)}else{window.addEventListener("load",a,false)}}else{d.oneStep(c)}})
({});